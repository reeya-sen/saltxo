class XMenu extends HTMLElement{constructor(){super()}connectedCallback(){this.open_menu=null,this.sub_menus=this.querySelectorAll(".x-menu--level-2--container"),this.sub_menu_parents=[...this.sub_menus].map(e=>e.parentNode),this.sub_menu_links=[...this.sub_menus].map(e=>e.previousElementSibling),this.listeners()}disconnectedCallback(){this.sub_menu_links.off("mouseenter.XMenu focusin.XMenu focusout.XMenu"),this.sub_menu_parents.off("mouseleave.XMenu focusout.XMenu")}listeners(){this.sub_menu_links.on("mouseenter.XMenu",({target:e})=>this.openMenu(e)),this.sub_menu_parents.on("mouseleave.XMenu",()=>this.closeMenu()),this.sub_menu_links.on("focusin.XMenu",({target:e})=>this.openMenu(e)),this.sub_menu_links.on("focusout.XMenu",({target:e,relatedTarget:n})=>{e.parentNode.contains(n)||this.closeMenu()}),this.sub_menu_parents.on("focusout.XMenu",({relatedTarget:e})=>{e&&e.closest(".x-menu--level-2--container")||this.closeMenu(!0)}),this.sub_menu_links.on("touchstart.XMenu",e=>{e.preventDefault(),"true"===e.target.getAttribute("aria-expanded")?this.closeMenu():this.openMenu(e.target)},{passive:!0}),Shopify.designMode&&(this.on("shopify:block:deselect",()=>this.closeMenu()),this.on("shopify:block:select",({target:e})=>{var n=e.closest(".x-menu--level-2--container");this.openMenu(n.previousElementSibling)}))}openMenu(e){var n=e.nextElementSibling;this.open_menu&&this.open_menu!==n?this.closeMenu(!0):this.open_menu&&this.open_menu===n&&this.open_menu.off("transitionend"),this.open_menu=n,e.setAttribute("aria-expanded",!0),this.open_menu.removeAttribute("style"),setTimeout(()=>this.open_menu.setAttribute("aria-hidden",!1),0)}closeMenu(e){null!==this.open_menu&&(this.open_menu.previousElementSibling.setAttribute("aria-expanded",!1),this.open_menu.setAttribute("aria-hidden",!0),e?(this.findAndResetTransition(this.open_menu),this.open_menu.off("transitionend"),this.open_menu.style.display="none",this.open_menu=null):this.open_menu.on("transitionend",()=>{null!==this.open_menu&&(this.findAndResetTransition(this.open_menu),this.open_menu.style.display="none",this.open_menu=null)},{once:!0}))}findAndResetTransition(e){var n,t;e&&(n=e.querySelector("[data-transition-container]"))&&(t=n.getAttribute("data-transition-container"),theme.transitions.reset(t))}}customElements.define("x-menu-root",XMenu);