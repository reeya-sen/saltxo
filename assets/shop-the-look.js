class ShopTheLookSection extends HTMLElement{constructor(){super()}connectedCallback(){this.add=this.querySelector(".shop-the-look--add"),this.hotspots=this.querySelectorAll(".shop-the-look--button"),this.dots=this.querySelectorAll(".shop-the-look--dot"),this.products=this.querySelectorAll(".shop-the-look--product"),this.product_ids=this.getProductIds(),this.buttonListener(),this.addToCartListener(),Shopify.designMode&&this.blockListener()}getProductIds(){return[...this.products].map(t=>parseInt(t.getAttribute("data-product-id"))).filter(t=>!isNaN(t))}addToCartListener(){this.add&&this.add.on("click",async()=>{if(0!==this.product_ids.length){this.add.setAttribute("aria-busy",!0);var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:this.product_ids.map(t=>({id:t,quantity:1}))})};try{await theme.cart.addItems(t,...this.product_ids),theme.drawer.open("right","cart-drawer",this.add)}catch(t){throw new Error(t)}this.add.setAttribute("aria-busy",!1)}})}buttonListener(){[...this.dots,...this.hotspots].on("click",({key:t,target:e,type:s})=>{if("keydown"!==s||"Enter"===t){const o=e.dataset.index;this.hotspots.forEach(t=>{t.setAttribute("data-transition-active",t.dataset.index===o)}),this.dots.forEach(t=>{t.setAttribute("aria-current",t.dataset.index===o)}),this.products.forEach(t=>{t.setAttribute("data-transition-active",t.dataset.index===o),t.setAttribute("aria-hidden",t.dataset.index!==o)})}})}blockListener(){this.hotspots.on("theme:block:select",({target:t})=>t.trigger("click"))}}const shopTheLookEl=customElements.get("shop-the-look");shopTheLookEl||customElements.define("shop-the-look",ShopTheLookSection);