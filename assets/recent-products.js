class RecentProductsSection extends HTMLElement{constructor(){super()}connectedCallback(){this.grid_container=this.querySelector(".recent-products--grid"),this.fragment=new DocumentFragment,this.spinner=this.querySelector(".recent-products--spinner"),this.storage=JSON.parse(localStorage.getItem(theme.local_storage.recent_products)),this.storage?this.load():this.style.display="none"}load(){var e=this.storage.map(e=>this.renderProductItem(e));Promise.allSettled(e).then(()=>this.productsLoaded())}async renderProductItem(e){var t,r=await fetch(theme.urls.root+`/products/${e}?view=ajax-item`);r.ok&&(t=(await r.text()).parse(".product--root"),this.fragment.prepend(t))}productsLoaded(){this.grid_container.prepend(this.fragment),theme.transitions.reload("recents"),this.grid_container.removeAttribute("style"),this.spinner.style.display="none"}}const recentProductsEl=customElements.get("recent-products-root");recentProductsEl||customElements.define("recent-products-root",RecentProductsSection);