class Header extends HTMLElement{constructor(){super()}connectedCallback(){this.primary_nav=this.querySelector(".header--primary-nav"),this.container=this.primary_nav.parentNode,this.x_gap_and_padding=128,this.layout=this.getAttribute("data-layout"),this.logo=this.querySelector(".header--logo"),this.scroll_hide="true"===this.getAttribute("data-scroll-hide"),this.secondary_nav=this.querySelector(".header--secondary-nav"),this.sticky="true"===this.getAttribute("data-sticky"),this.transparent_enabled="true"===this.getAttribute("data-transparent-enabled"),this.overlap_behavior=this.getAttribute("data-overlap-behavior"),this.prev_scroll_pos=window.scrollY,this.x_menu=this.primary_nav.querySelector(".x-menu"),this.minimum_expanded_width=this.x_menu.offsetWidth+this.secondary_nav.offsetWidth+this.logo.offsetWidth+this.x_gap_and_padding,this.resizeObserver(),this.sticky&&this.scrollListener(),this.setAttribute("data-loaded",!0),Shopify.designMode&&this.addShopifyListeners()}disconnectedCallback(){window.off("scroll.Header")}resizeObserver(){new ResizeObserver(()=>{this.root_rect=this.getBoundingClientRect(),this.scrollCallback(),this.checkHorizontalOverflow(),this.measureHeight()}).observe(this)}checkHorizontalOverflow(){let t=!1;switch(this.layout){case"center-left":this.enableOverlap(t);var e=this.primary_nav.getBoundingClientRect()["right"],i=this.logo.getBoundingClientRect()["left"];t=i<e+16;break;case"left-center":case"left-left":t=this.minimum_expanded_width>this.container.offsetWidth}this.primary_nav.setAttribute("aria-hidden",!1),this.layout.includes("left")&&this.enableOverlap(t)}enableOverlap(t){this.setAttribute("aria-expanded",t),t?this.setAttribute("data-layout",this.overlap_behavior):this.setAttribute("data-layout",this.layout)}measureHeight(){this.hide_offset=(this.root_rect.top+window.scrollY+this.root_rect.height).toFixed(2),document.documentElement.style.setProperty("--header--height",this.root_rect.height.toFixed(2)+"px")}scrollListener(){window.on("scroll.Header",()=>{this.animation_request&&cancelAnimationFrame(this.animation_request),this.animation_request=requestAnimationFrame(()=>this.scrollCallback())},{passive:!0})}scrollCallback(){var t;theme.drawer.status.includes("clos")&&"opened"!==theme.modal.status&&this.root_rect&&(t=window.scrollY,this.setAttribute("data-sticky",this.root_rect.top<t),this.scroll_hide)&&(t<=this.hide_offset?(this.setAttribute("aria-hidden",!1),document.documentElement.style.setProperty("--header--sticky",1)):(this.setAttribute("aria-hidden",t>this.prev_scroll_pos),document.documentElement.style.setProperty("--header--sticky",t>this.prev_scroll_pos?0:1)),this.prev_scroll_pos=t)}addShopifyListeners(){document.on("shopify:inspector:activate.Header",()=>{this.parentNode.style.position="relative",this.parentNode.style.top="unset"}),document.on("shopify:inspector:deactivate.Header",()=>{setTimeout(()=>{this.parentNode.removeAttribute("style")},0)}),document.on("shopify:section:load shopify:section:unload",()=>{this.root_rect=this.getBoundingClientRect(),this.measureHeight()}),this.on("shopify:block:deselect",()=>{this.setAttribute("data-sticky",!1)}),this.on("shopify:block:select",()=>{this.setAttribute("data-sticky",!0)}),this.on("theme:section:load",()=>{theme.drawer.loadTriggers(),this.measureHeight()})}}customElements.define("header-root",Header);